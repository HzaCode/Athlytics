<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Advanced Sports Performance Analysis for Strava Data • Athlytics</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Advanced Sports Performance Analysis for Strava Data">
<meta name="description" content="Provides a suite of tools for advanced sports performance analysis and modeling, designed to work with activity data retrieved from Strava. It focuses on applying established sports science models and statistical methods to gain deeper insights into training load, performance prediction, recovery status, and identifying key performance factors, extending basic data analysis capabilities.">
<meta property="og:description" content="Provides a suite of tools for advanced sports performance analysis and modeling, designed to work with activity data retrieved from Strava. It focuses on applying established sports science models and statistical methods to gain deeper insights into training load, performance prediction, recovery status, and identifying key performance factors, extending basic data analysis capabilities.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">Athlytics</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/Athlytics-introduction.html">Introduction to Athlytics</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="articles/index.html">All vignettes</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/HzaCode/Athlytics/"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="athlytics-">Athlytics <img src="https://github.com/HzaCode/Athlytics/blob/main/image.png?raw=true" align="right" width="200"><a class="anchor" aria-label="anchor" href="#athlytics-"></a>
</h1></div>
<p><a href="https://www.repostatus.org/#active" class="external-link"><img src="https://www.repostatus.org/badges/latest/active.svg" alt="Project Status"></a> <a href="https://CRAN.R-project.org/" class="external-link"><img src="https://img.shields.io/badge/CRAN%20status-pending%20review-orange.svg" alt="CRAN status: pending review"></a> <a href="https://github.com/HzaCode/Athlytics/actions/workflows/R-CMD-check.yml" class="external-link"><img src="https://github.com/HzaCode/Athlytics/actions/workflows/R-CMD-check.yml/badge.svg" alt="R-CMD-check"></a> <img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg"><a href="https://opensource.org/licenses/MIT" class="external-link"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT"></a> <a href="https://hzaCode.github.io/Athlytics"><img src="https://img.shields.io/badge/website-Athlytics-blue" alt="Website"></a> <img src="https://img.shields.io/badge/R%20Journal-In%20Submission-orange" alt="R Journal: In Submission"><a href="https://github.com/HzaCode/Athlytics/pulls" class="external-link"><img src="https://img.shields.io/badge/PRs-welcome-brightgreen.svg" alt="PRs Welcome"></a></p>
<div class="section level3">
<h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<p>This is the development repository for <strong>Athlytics</strong>, an R package designed to simplify the analysis of athletic performance and training load data sourced <strong>directly from the Strava API</strong>. The package provides functions for fetching your Strava data, calculating key metrics, and generating insightful visualizations for training monitoring.</p>
</div>
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>You can install the released version of Athlytics from CRAN (once available) with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"Athlytics"</span><span class="op">)</span></span></code></pre></div>
<p>Alternatively, the development version from this repository can be installed as follows:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages('remotes')</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">'HzaCode/Athlytics'</span><span class="op">)</span></span></code></pre></div>
<p>You also need to install <code>rStrava</code> if you don’t have it already:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rStrava"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="using-athlytics-functions">Using Athlytics Functions<a class="anchor" aria-label="anchor" href="#using-athlytics-functions"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">Athlytics</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="authentication-with-strava-using-rstrava">Authentication with Strava (using <code>rStrava</code>)<a class="anchor" aria-label="anchor" href="#authentication-with-strava-using-rstrava"></a>
</h3>
<p><code>Athlytics</code> <strong>requires</strong> you to authenticate with Strava using the <code>rStrava</code> package. This generates a token that you then pass to <code>Athlytics</code> functions.</p>
<ol style="list-style-type: decimal">
<li>
<strong>Create a Strava API Application:</strong>
<ul>
<li>Go to <a href="https://www.strava.com/settings/api" class="external-link uri">https://www.strava.com/settings/api</a>.</li>
<li>Create a new API application (e.g., “My Athlytics Analysis”).</li>
<li>Set the “Authorization Callback Domain” to <code>localhost</code>.</li>
<li>Note your <strong>Client ID</strong> and <strong>Client Secret</strong>.</li>
</ul>
</li>
<li>
<strong>Authenticate in R using <code><a href="https://rdrr.io/pkg/rStrava/man/strava_oauth.html" class="external-link">rStrava::strava_oauth()</a></code>:</strong>
<ul>
<li>This function handles the OAuth2.0 flow, potentially opening a browser window for authorization.</li>
<li>It returns a <code>Token2.0</code> object needed by <code>Athlytics</code>.</li>
<li>
<strong>Use <code>cache = TRUE</code></strong> (default) to store the token securely (in <code>.httr-oauth</code>), avoiding re-authentication in later sessions.</li>
</ul>
</li>
</ol>
<p>Note: Running <code><a href="https://rdrr.io/pkg/rStrava/man/strava_oauth.html" class="external-link">strava_oauth()</a></code> may open a browser window for you to log in to Strava and authorize the application.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">Athlytics</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">rStrava</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Sys.setenv(STRAVA_CLIENT_ID = "YOUR_CLIENT_ID")</span></span>
<span><span class="co"># Sys.setenv(STRAVA_CLIENT_SECRET = "YOUR_SECRET")</span></span>
<span></span>
<span><span class="co"># --- Authentication Step ---</span></span>
<span><span class="va">app_name</span> <span class="op">&lt;-</span> <span class="st">'MyAthlyticsApp'</span> <span class="co"># Choose a name</span></span>
<span><span class="va">client_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"STRAVA_CLIENT_ID"</span><span class="op">)</span></span>
<span><span class="va">client_secret</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html" class="external-link">Sys.getenv</a></span><span class="op">(</span><span class="st">"STRAVA_CLIENT_SECRET"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Authenticate using rStrava and STORE the token object</span></span>
<span><span class="co"># Make sure app_scope allows reading activities.</span></span>
<span><span class="va">stoken</span> <span class="op">&lt;-</span> <span class="fu">rStrava</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rStrava/man/strava_oauth.html" class="external-link">strava_oauth</a></span><span class="op">(</span><span class="va">app_name</span>,</span>
<span>                                app_client_id <span class="op">=</span> <span class="va">client_id</span>, <span class="co"># Use app_client_id</span></span>
<span>                                app_secret <span class="op">=</span> <span class="va">client_secret</span>, <span class="co"># Use app_secret</span></span>
<span>                                app_scope <span class="op">=</span> <span class="st">"activity:read_all"</span>, <span class="co"># Or specific scope needed</span></span>
<span>                                cache <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co"># IMPORTANT for reusing the token</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="optional-parameters-for-specific-metrics">Optional Parameters for Specific Metrics<a class="anchor" aria-label="anchor" href="#optional-parameters-for-specific-metrics"></a>
</h3>
<p>While most functions rely on data directly available from Strava (like duration, distance, heart rate), some advanced calculations or metrics <strong>may require additional user-specific information</strong>.</p>
<ul>
<li>
<code>user_ftp</code> (Numeric): Your Functional Threshold Power (in Watts). Needed for calculating TSS (approximate) or power zones for cycling/running with power.</li>
<li>
<code>user_max_hr</code> (Numeric): Your maximum heart rate. Needed for calculating HRSS (approximate).</li>
<li>
<code>user_resting_hr</code> (Numeric): Your resting heart rate. Also needed for calculating HRSS (approximate).</li>
</ul>
<p><em>(Provide these parameters directly to the Athlytics function call if the chosen <code>load_metric</code> or analysis requires them. Check function documentation for details.)</em></p>
</div>
<div class="section level3">
<h3 id="example-analysis-visualizations">Example Analysis Visualizations<a class="anchor" aria-label="anchor" href="#example-analysis-visualizations"></a>
</h3>
<p>These functions generate plots to analyze trends and performance, using data fetched and processed from Strava via the <code>stoken</code> you provide.</p>
<p><strong>Important Note on API Usage and Performance:</strong> Some functions, particularly <code>calculate_pbs</code> (which needs to fetch detailed data for each activity) and <code>calculate_decoupling</code> (which now uses <code>httr</code> to directly fetch detailed activity streams), can be <strong>slow</strong> and may hit Strava API rate limits (leading to errors) if you analyze a large number of activities. Consider using the <code>max_activities</code> parameter in these functions or analyzing shorter date ranges if you encounter issues.</p>
</div>
<div class="section level3">
<h3 id="id_1-load-exposure">1. Load Exposure<a class="anchor" aria-label="anchor" href="#id_1-load-exposure"></a>
</h3>
<p>This analysis provides an intuitive way to assess your current training load status and potential injury risk level by plotting acute vs. chronic load. You can clearly see where your load combination falls within defined risk zones (like the sweet spot, caution zone, or danger zone). <strong>Note:</strong> When using TSS or HRSS as the <code>load_metric</code>, the calculation is an <em>approximation</em> based on average power or average heart rate available from the Strava activity summary, not detailed stream data (which would be much slower to process).</p>
<p><strong>Calculating Data:</strong> To get the underlying data (date, daily_load, atl, ctl, acwr) as a data frame without plotting:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ensure stoken is a valid token object from rStrava::strava_oauth()</span></span>
<span><span class="co"># Ensure user_ftp = 280 is appropriate for the user</span></span>
<span><span class="va">exposure_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/calculate_exposure.html">calculate_exposure</a></span><span class="op">(</span></span>
<span>    stoken <span class="op">=</span> <span class="va">stoken</span>,</span>
<span>    activity_type <span class="op">=</span> <span class="st">"Ride"</span>, <span class="co"># Example: Target Rides</span></span>
<span>    load_metric <span class="op">=</span> <span class="st">"tss"</span>,    <span class="co"># Example: Use approximate TSS based on average power</span></span>
<span>    user_ftp <span class="op">=</span> <span class="fl">280</span>,         <span class="co"># REQUIRED for TSS</span></span>
<span>    acute_period <span class="op">=</span> <span class="fl">7</span>,</span>
<span>    chronic_period <span class="op">=</span> <span class="fl">28</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># print(tail(exposure_data)) # Uncomment to view</span></span></code></pre></div>
<p><strong>Plotting:</strong></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example using approximated TSS based on avg power for Rides</span></span>
<span><span class="co"># Ensure stoken is valid and user_ftp = 280 is correct</span></span>
<span><span class="fu"><a href="reference/plot_exposure.html">plot_exposure</a></span><span class="op">(</span></span>
<span>    stoken <span class="op">=</span> <span class="va">stoken</span>,</span>
<span>    activity_type <span class="op">=</span> <span class="st">"Ride"</span>,        <span class="co"># Specify activity type(s)</span></span>
<span>    load_metric <span class="op">=</span> <span class="st">"tss"</span>,           <span class="co"># Use approximate TSS</span></span>
<span>    user_ftp <span class="op">=</span> <span class="fl">280</span>,                <span class="co"># REQUIRED for TSS</span></span>
<span>    acute_period <span class="op">=</span> <span class="fl">7</span>,              <span class="co"># Duration (days) for acute load calculation</span></span>
<span>    chronic_period <span class="op">=</span> <span class="fl">28</span>            <span class="co"># Duration (days) for chronic load calculation</span></span>
<span>    <span class="co"># , end_date = Sys.Date()      # Optional</span></span>
<span>    <span class="co"># , risk_zones = TRUE          # Optional</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Example using approximate HRSS based on avg heart rate for Runs</span></span>
<span><span class="co"># Ensure stoken is valid and HR parameters are correct</span></span>
<span><span class="fu"><a href="reference/plot_exposure.html">plot_exposure</a></span><span class="op">(</span></span>
<span>    stoken <span class="op">=</span> <span class="va">stoken</span>,</span>
<span>    activity_type <span class="op">=</span> <span class="st">"Run"</span>,         <span class="co"># Specify activity type(s)</span></span>
<span>    load_metric <span class="op">=</span> <span class="st">"hrss"</span>,          <span class="co"># Use approximate HRSS</span></span>
<span>    user_max_hr <span class="op">=</span> <span class="fl">190</span>,             <span class="co"># REQUIRED for HRSS</span></span>
<span>    user_resting_hr <span class="op">=</span> <span class="fl">50</span>,          <span class="co"># REQUIRED for HRSS</span></span>
<span>    acute_period <span class="op">=</span> <span class="fl">7</span>,              <span class="co"># Duration (days) for acute load calculation</span></span>
<span>    chronic_period <span class="op">=</span> <span class="fl">42</span>            <span class="co"># Example: Longer chronic window</span></span>
<span>    <span class="co"># , end_date = Sys.Date()      # Optional</span></span>
<span>    <span class="co"># , risk_zones = TRUE          # Optional</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="https://gaudy-pipe-239.notion.site/image/attachment%3Ada869625-0481-4b1d-af1a-a1785add2962%3Aimage.png?table=block&amp;id=1c9fc401-a191-8045-aadf-cc29956870ef&amp;spaceId=1d079353-f9e2-45ba-8b15-cf2f96e168c5&amp;width=1420&amp;userId=&amp;cache=v2"></p>
</div>
<div class="section level3">
<h3 id="id_2-acwr-trend">2. ACWR Trend<a class="anchor" aria-label="anchor" href="#id_2-acwr-trend"></a>
</h3>
<p>With this analysis, you can monitor the rate of change in your training load over time, helping to identify periods of rapid increases that might lead to overtraining or heightened injury risk. It’s a valuable tool for periodized training monitoring and risk management. <em>Note: While <code>calculate_exposure</code> also calculates ACWR as part of its output, this <code>calculate_acwr</code> function focuses specifically on the ACWR metric and its associated plot.</em></p>
<p><strong>Calculating Data:</strong> To get the underlying ACWR data (date, acwr, acwr_smooth) as a data frame:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ensure stoken is valid</span></span>
<span><span class="va">acwr_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/calculate_acwr.html">calculate_acwr</a></span><span class="op">(</span></span>
<span>    stoken <span class="op">=</span> <span class="va">stoken</span>,</span>
<span>    activity_type <span class="op">=</span> <span class="st">"Run"</span>,</span>
<span>    load_metric <span class="op">=</span> <span class="st">"duration_mins"</span>,</span>
<span>    acute_period <span class="op">=</span> <span class="fl">7</span>, </span>
<span>    chronic_period <span class="op">=</span> <span class="fl">28</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># print(tail(acwr_data)) # Uncomment to view</span></span></code></pre></div>
<p><strong>Plotting:</strong></p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ensure stoken is valid</span></span>
<span><span class="fu"><a href="reference/plot_acwr.html">plot_acwr</a></span><span class="op">(</span></span>
<span>    stoken <span class="op">=</span> <span class="va">stoken</span>,</span>
<span>    activity_type <span class="op">=</span> <span class="st">"Run"</span>,         <span class="co"># Specify activity type(s), e.g., "Run", "Ride", NULL for all</span></span>
<span>    load_metric <span class="op">=</span> <span class="st">"duration_mins"</span>, <span class="co"># Choose metric: "duration_mins", "distance_km", "elapsed_time_mins", "tss", "hrss", "elevation_gain_m"</span></span>
<span>    acute_period <span class="op">=</span> <span class="fl">7</span>,              <span class="co"># Duration (days) for acute load calculation</span></span>
<span>    chronic_period <span class="op">=</span> <span class="fl">28</span>            <span class="co"># Duration (days) for chronic load calculation</span></span>
<span>    <span class="co"># , start_date = NULL          # Optional: Start date (YYYY-MM-DD) for analysis (defaults to 1 year ago)</span></span>
<span>    <span class="co"># , end_date = NULL            # Optional: End date (YYYY-MM-DD) for analysis (defaults to today)</span></span>
<span>    <span class="co"># , user_ftp = NULL            # Optional: Required if load_metric = "tss"</span></span>
<span>    <span class="co"># , user_max_hr = NULL         # Optional: Required if load_metric = "hrss"</span></span>
<span>    <span class="co"># , user_resting_hr = NULL     # Optional: Required if load_metric = "hrss"</span></span>
<span>    <span class="co"># , smoothing_period = 7       # Optional: Days for smoothing the ACWR line (defaults to 7)</span></span>
<span>    <span class="co"># , highlight_zones = TRUE     # Optional: Show background risk zone shading (defaults to TRUE)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="https://gaudy-pipe-239.notion.site/image/attachment%3A3b50a271-b755-4eb5-9108-34f97e68b58b%3Aimage.png?table=block&amp;id=1cafc401-a191-80e8-967a-fc60f6946af5&amp;spaceId=1d079353-f9e2-45ba-8b15-cf2f96e168c5&amp;width=1420&amp;userId=&amp;cache=v2"></p>
</div>
<div class="section level3">
<h3 id="id_3-efficiency-factor-trend">3. Efficiency Factor Trend<a class="anchor" aria-label="anchor" href="#id_3-efficiency-factor-trend"></a>
</h3>
<p>The Efficiency Factor (EF) is a common metric for assessing aerobic fitness adaptations. Ideally, EF should trend upwards as fitness improves, indicating higher output for the same physiological cost. This analysis helps track long-term aerobic efficiency progress and may signal accumulating fatigue or fluctuations in form.</p>
<p><strong>Calculating Data:</strong> To get the underlying EF data (date, activity_type, ef_value) as a data frame:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ensure stoken is valid</span></span>
<span><span class="va">ef_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/calculate_ef.html">calculate_ef</a></span><span class="op">(</span></span>
<span>    stoken <span class="op">=</span> <span class="va">stoken</span>,</span>
<span>    activity_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Run"</span>, <span class="st">"Ride"</span><span class="op">)</span>, <span class="co"># Example: Runs and Rides</span></span>
<span>    ef_metric <span class="op">=</span> <span class="st">"Pace_HR"</span>             <span class="co"># Example: Pace/HR</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># print(tail(ef_data)) # Uncomment to view</span></span></code></pre></div>
<p><strong>Plotting:</strong></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ensure stoken is valid</span></span>
<span><span class="fu"><a href="reference/plot_ef.html">plot_ef</a></span><span class="op">(</span></span>
<span>    stoken <span class="op">=</span> <span class="va">stoken</span>,</span>
<span>    activity_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Run"</span>, <span class="st">"Ride"</span><span class="op">)</span>, <span class="co"># Specify activity type(s)</span></span>
<span>    ef_metric <span class="op">=</span> <span class="st">"Pace_HR"</span>             <span class="co"># Choose metric: "Pace_HR", "Power_HR"</span></span>
<span>    <span class="co"># , start_date = NULL             # Optional</span></span>
<span>    <span class="co"># , end_date = NULL               # Optional</span></span>
<span>    <span class="co"># , min_duration_mins = 20        # Optional</span></span>
<span>    <span class="co"># , add_trend_line = TRUE         # Optional</span></span>
<span>    <span class="co"># , smoothing_method = "loess"    # Optional</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="https://gaudy-pipe-239.notion.site/image/attachment%3A20a75be7-f255-43ce-a848-ad8e4213858e%3Aimage.png?table=block&amp;id=1cdfc401-a191-806a-986a-d49ee4389a08&amp;spaceId=1d079353-f9e2-45ba-8b15-cf2f96e168c5&amp;width=1420&amp;userId=&amp;cache=v2"></p>
</div>
<div class="section level3">
<h3 id="id_4-long-term-performance-metrics-tracking-personal-bests---pbs">4. Long-Term Performance Metrics Tracking (Personal Bests - PBs)<a class="anchor" aria-label="anchor" href="#id_4-long-term-performance-metrics-tracking-personal-bests---pbs"></a>
</h3>
<p>This analysis allows you to visualize the progression of your key performance benchmarks over extended periods. Track metrics like your estimated best times for standard distances (e.g., 1k, 5k, 10k) or critical power outputs. By observing these trends, including highlighted Personal Bests (PBs), you can directly assess the effectiveness of different training blocks, validate fitness improvements beyond physiological markers, identify performance plateaus, and stay motivated by seeing concrete results align with your goals.</p>
<p><strong>Calculating Data:</strong> To get the underlying PB data (activity_id, activity_date, distance, time_seconds, cumulative_pb_seconds, is_pb, etc.) as a data frame:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ensure stoken is valid</span></span>
<span><span class="va">pb_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/calculate_pbs.html">calculate_pbs</a></span><span class="op">(</span></span>
<span>    stoken <span class="op">=</span> <span class="va">stoken</span>,</span>
<span>    distance_meters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">5000</span>, <span class="fl">10000</span><span class="op">)</span>, <span class="co"># Example: 1k, 5k, 10k</span></span>
<span>    activity_type <span class="op">=</span> <span class="st">"Run"</span>                   <span class="co"># Example: For Runs</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># print(tail(pb_data)) # Uncomment to view</span></span>
<span><span class="co"># Filter for actual new PBs</span></span>
<span><span class="co"># new_pbs &lt;- pb_data[pb_data$is_pb, ]</span></span>
<span><span class="co"># print(new_pbs)</span></span></code></pre></div>
<p><strong>Plotting:</strong></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ensure stoken is valid</span></span>
<span><span class="fu"><a href="reference/plot_pbs.html">plot_pbs</a></span><span class="op">(</span></span>
<span>    stoken <span class="op">=</span> <span class="va">stoken</span>,</span>
<span>    distance_meters <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1000</span>, <span class="fl">5000</span>, <span class="fl">10000</span><span class="op">)</span>, <span class="co"># Specify distances in meters (REQUIRED)</span></span>
<span>    activity_type <span class="op">=</span> <span class="st">"Run"</span>                   <span class="co"># Specify activity type (currently only "Run" is fully supported)</span></span>
<span>    <span class="co"># , max_activities = 100                  # Optional: Limit activities to check for speed/API limits</span></span>
<span>    <span class="co"># , date_range = NULL                   # Optional</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="https://gaudy-pipe-239.notion.site/image/attachment%3Af5624d35-ad3d-4242-aefc-7cf49881b777%3Aimage.png?table=block&amp;id=1cbfc401-a191-808d-a62b-faa76e4beb5f&amp;spaceId=1d079353-f9e2-45ba-8b15-cf2f96e168c5&amp;width=1420&amp;userId=&amp;cache=v2"></p>
</div>
</div>
<div class="section level1">
<h1 id="section">============================================================<a class="anchor" aria-label="anchor" href="#section"></a>
</h1>
</div>
<div class="section level1">
<h1 id="re-adding-decoupling-section">Re-adding Decoupling Section<a class="anchor" aria-label="anchor" href="#re-adding-decoupling-section"></a>
</h1>
</div>
<div class="section level1">
<h1 id="section-1">============================================================<a class="anchor" aria-label="anchor" href="#section-1"></a>
</h1>
<div class="section level3">
<h3 id="id_5-decoupling-trend-pacepower-vs-hr">5. Decoupling Trend (Pace/Power vs HR)<a class="anchor" aria-label="anchor" href="#id_5-decoupling-trend-pacepower-vs-hr"></a>
</h3>
<p><strong>Note:</strong> This analysis requires fetching detailed stream data for each activity (<code>calculate_decoupling</code> uses <code>httr</code> for this) and can be very slow or hit API rate limits. Use the <code>max_activities</code> parameter to limit the scope.</p>
<p><strong>Calculating Data:</strong> To get the underlying decoupling data (date, decoupling) as a data frame:</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co"># Ensure stoken is valid.</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a><span class="co"># </span><span class="al">WARNING</span><span class="co">: Can be slow. Reduce max_activities for testing.</span></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a>de decoupling_data <span class="ot">&lt;-</span> <span class="fu">tryCatch</span>({</span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>    <span class="fu">calculate_decoupling</span>(</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>        <span class="at">stoken =</span> stoken,</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>        <span class="at">activity_type =</span> <span class="st">"Run"</span>,</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>        <span class="at">decouple_metric =</span> <span class="st">"Pace_HR"</span>,</span>
<span id="cb14-8"><a href="#cb14-8" tabindex="-1"></a>        <span class="at">max_activities =</span> <span class="dv">20</span> <span class="co"># Use a small number for example</span></span>
<span id="cb14-9"><a href="#cb14-9" tabindex="-1"></a>    )</span>
<span id="cb14-10"><a href="#cb14-10" tabindex="-1"></a>}, <span class="at">error =</span> <span class="cf">function</span>(e) {</span>
<span id="cb14-11"><a href="#cb14-11" tabindex="-1"></a>    <span class="fu">message</span>(<span class="st">"Error calculating decoupling: "</span>, e<span class="sc">$</span>message)</span>
<span id="cb14-12"><a href="#cb14-12" tabindex="-1"></a>    <span class="cn">NULL</span></span>
<span id="cb14-13"><a href="#cb14-13" tabindex="-1"></a>})</span>
<span id="cb14-14"><a href="#cb14-14" tabindex="-1"></a><span class="co"># print(tail(decoupling_data)) # Uncomment to view</span></span></code></pre></div>
<p><strong>Plotting:</strong></p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Ensure stoken is valid.</span></span>
<span><span class="co"># WARNING: Can be slow. Reduce max_activities for plotting.</span></span>
<span><span class="co"># Example: Plot pre-calculated data if calculation succeeded</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NULL.html" class="external-link">is.null</a></span><span class="op">(</span><span class="va">decoupling_data</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="reference/plot_decoupling.html">plot_decoupling</a></span><span class="op">(</span></span>
<span>        decoupling_df <span class="op">=</span> <span class="va">decoupling_data</span></span>
<span>        <span class="co"># Optional params for plot_decoupling can be added here if needed,</span></span>
<span>        <span class="co"># like add_trend_line = FALSE, etc.</span></span>
<span>        <span class="co"># Since we provide decoupling_df, other calculation params are ignored by plot_decoupling.</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/message.html" class="external-link">message</a></span><span class="op">(</span><span class="st">"Skipping decoupling plot as calculation failed or returned no data."</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Alternative: Let plot_decoupling handle the calculation (can be slow)</span></span>
<span><span class="co"># plot_decoupling(</span></span>
<span><span class="co">#     stoken = stoken,</span></span>
<span><span class="co">#     activity_type = "Run",</span></span>
<span><span class="co">#     decouple_metric = "Pace_HR",</span></span>
<span><span class="co">#     max_activities = 20 # Use a small number for example</span></span>
<span><span class="co"># )</span></span></code></pre></div>
<p><img src="https://gaudy-pipe-239.notion.site/image/attachment%3A13491597-6762-4ea3-843d-13005cf21e8a%3Aimage.png?table=block&amp;id=1cbfc401-a191-80b5-8f1a-efda0eddf069&amp;spaceId=1d079353-f9e2-45ba-8b15-cf2f96e168c5&amp;width=1420&amp;userId=&amp;cache=v2"> # ============================================================</p>
<hr>
</div>
<div class="section level3">
<h3 id="development-status--potential-issues">Development Status &amp; Potential Issues<a class="anchor" aria-label="anchor" href="#development-status--potential-issues"></a>
</h3>
<p>Athlytics is under active development. While core functionalities are tested, variations in Strava data availability or unforeseen API interactions might occasionally lead to warnings or errors during execution. We appreciate bug reports and contributions to improve robustness!</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/HzaCode/Athlytics/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/HzaCode/Athlytics/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing Athlytics</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Ang <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
