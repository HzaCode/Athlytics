% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_decoupling.R
\name{calculate_decoupling}
\alias{calculate_decoupling}
\title{Calculate Aerobic Decoupling from Local Strava Data}
\usage{
calculate_decoupling(
  activities_data,
  export_dir = "strava_export_data",
  activity_type = c("Run", "Ride"),
  start_date = NULL,
  end_date = NULL,
  min_duration_mins = 40
)
}
\arguments{
\item{activities_data}{A data frame of activities from `load_local_activities()`.
Must contain columns: date, type, filename.}

\item{export_dir}{Base directory of the Strava export containing the activities folder.
Default is "strava_export_data".}

\item{activity_type}{Type of activities to analyze (e.g., "Run", "Ride").}

\item{start_date}{Optional start date for analysis (YYYY-MM-DD). Defaults to NULL (all dates).}

\item{end_date}{Optional end date for analysis (YYYY-MM-DD). Defaults to NULL (all dates).}

\item{min_duration_mins}{Minimum activity duration in minutes to include. Default 40.}
}
\value{
A data frame with columns: date, activity_id, decoupling_percent
}
\description{
Calculates cardiovascular (aerobic) decoupling by analyzing the relationship
between normalized power/pace and heart rate. Decoupling indicates cardiovascular
drift, where heart rate rises relative to power/pace output during sustained efforts.
}
\details{
Aerobic decoupling is calculated by comparing the first and second halves of an activity:
\itemize{
  \item Runs: Pace/HR ratio between first and second half
  \item Rides: Power/HR ratio between first and second half
}
A decoupling > 5\% typically indicates cardiovascular drift or inadequate aerobic fitness
for the given intensity.

**Note**: This function requires detailed activity files (FIT/TCX/GPX) from your
Strava export to extract second-by-second heart rate and power/pace data.
}
\examples{
# Example using simulated data
data(athlytics_sample_decoupling)
print(head(athlytics_sample_decoupling))

\dontrun{
# Load local activities
activities <- load_local_activities("strava_export_data/activities.csv")

# Calculate decoupling for long runs
decoupling_data <- calculate_decoupling(
  activities_data = activities,
  export_dir = "strava_export_data",
  activity_type = "Run",
  min_duration_mins = 60
)
print(head(decoupling_data))
}
}
