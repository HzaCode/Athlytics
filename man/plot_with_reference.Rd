% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/cohort_reference.R
\name{plot_with_reference}
\alias{plot_with_reference}
\title{Plot Individual Metric with Cohort Reference}
\usage{
plot_with_reference(
  individual,
  reference,
  metric = "acwr_smooth",
  date_col = "date",
  title = NULL,
  bands = c("p25_p75", "p05_p95", "p50"),
  caption = NULL
)
}
\arguments{
\item{individual}{A data frame with individual athlete data (from calculate_acwr, etc.)}

\item{reference}{A data frame from \code{calculate_cohort_reference()}.}

\item{metric}{Name of the metric to plot. Default "acwr_smooth".}

\item{date_col}{Name of the date column. Default "date".}

\item{title}{Plot title. Default NULL (auto-generated).}

\item{bands}{Which reference bands to show. Default c("p25_p75", "p05_p95", "p50").}

\item{caption}{Plot caption. Default NULL (no caption).}
}
\value{
A ggplot object.
}
\description{
Creates a complete plot showing an individual's metric trend with cohort
reference percentile bands.
}
\examples{
# Example with weekly data for smooth curves
set.seed(123)
n_weeks <- 40
dates <- seq(as.Date("2023-01-01"), by = "week", length.out = n_weeks)

# Individual athlete data with realistic ACWR fluctuation
individual_data <- data.frame(
  date = dates,
  acwr_smooth = 1.0 + cumsum(rnorm(n_weeks, 0, 0.03))
)

# Cohort reference percentiles with gradual variation
base_trend <- 1.0 + cumsum(rnorm(n_weeks, 0, 0.015))
reference_data <- data.frame(
  date  = rep(dates, each = 5),
  percentile = rep(c("p05", "p25", "p50", "p75", "p95"), n_weeks),
  value = as.vector(t(outer(base_trend, c(-0.35, -0.15, 0, 0.15, 0.35), "+")))
)

p <- plot_with_reference(
  individual = individual_data,
  reference = reference_data,
  metric = "acwr_smooth"
)
print(p)

\dontrun{
plot_with_reference(
  individual = athlete_acwr,
  reference = cohort_ref,
  metric = "acwr_smooth"
)
}
}
