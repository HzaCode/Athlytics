% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_ef.R
\name{plot_ef}
\alias{plot_ef}
\title{Plot Efficiency Factor (EF) Trend}
\usage{
plot_ef(
  stoken,
  activity_type = c("Run", "Ride"),
  ef_metric = c("Pace_HR", "Power_HR"),
  start_date = NULL,
  end_date = NULL,
  min_duration_mins = 20,
  add_trend_line = TRUE,
  smoothing_method = "loess",
  ef_df = NULL
)
}
\arguments{
\item{stoken}{A valid Strava token from `rStrava::strava_oauth()`. Required unless `ef_df` is provided.}

\item{activity_type}{Type(s) of activities to analyze (e.g., "Run", "Ride").}

\item{ef_metric}{Metric to calculate: "Pace_HR" (Speed/HR) or "Power_HR" (Power/HR).}

\item{start_date}{Optional. Analysis start date (YYYY-MM-DD string or Date). Defaults to ~1 year ago.}

\item{end_date}{Optional. Analysis end date (YYYY-MM-DD string or Date). Defaults to today.}

\item{min_duration_mins}{Minimum activity duration (minutes) to include. Default 20.}

\item{add_trend_line}{Add a smoothed trend line (`geom_smooth`)? Default `TRUE`.}

\item{smoothing_method}{Smoothing method for trend line (e.g., "loess", "lm"). Default "loess".}

\item{ef_df}{Optional. A pre-calculated data frame from `calculate_ef`.
If provided, `stoken` and other calculation parameters are ignored.}
}
\value{
A ggplot object showing the EF trend. Higher values generally indicate
  better aerobic efficiency.
}
\description{
Visualizes the trend of Efficiency Factor (EF) over time.
}
\details{
Calculates or uses pre-calculated Efficiency Factor data (Output/Input ratio,
typically Pace/HR or Power/HR) and creates a ggplot showing the trend.

Efficiency Factor (EF) measures output (speed or power) relative to input (heart rate).
  An upward trend often suggests improved aerobic fitness. This function plots EF calculated from
  average values for each activity. Activities lacking the necessary data (HR, power/distance)
  are excluded.

  If `ef_df` is not supplied, the function first calls `calculate_ef`.
}
\examples{
\dontrun{
# Requires authentication first:
# stoken <- rStrava::strava_oauth(..., cache = TRUE)

# Plot Pace/HR EF for Runs (last 6 months)
plot_ef(stoken = stoken,
        activity_type = "Run",
        ef_metric = "Pace_HR",
        start_date = Sys.Date() - months(6))

# Plot Power/HR EF for Rides
plot_ef(stoken = stoken,
        activity_type = "Ride",
        ef_metric = "Power_HR")

# Plot Pace/HR EF for multiple run types, no trend line
plot_ef(stoken = stoken,
        activity_type = c("Run", "VirtualRun"),
        ef_metric = "Pace_HR",
        add_trend_line = FALSE)

# Plot pre-calculated EF data
# ef_results <- calculate_ef(...)
# plot_ef(ef_df = ef_results)
}
}
