% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_ef.R
\name{plot_ef}
\alias{plot_ef}
\title{Plot Efficiency Factor (EF) Trend}
\usage{
plot_ef(
  data,
  activity_type = c("Run", "Ride"),
  ef_metric = c("pace_hr", "power_hr"),
  start_date = NULL,
  end_date = NULL,
  min_duration_mins = 20,
  add_trend_line = TRUE,
  smoothing_method = "loess",
  ef_df = NULL,
  group_var = NULL,
  group_colors = NULL
)
}
\arguments{
\item{data}{\strong{Recommended: Pass pre-calculated data via \code{ef_df} (local export preferred).}
A data frame from \code{calculate_ef()} or activities data from \code{load_local_activities()}.}

\item{activity_type}{Type(s) of activities to analyze (e.g., "Run", "Ride").}

\item{ef_metric}{Metric to calculate: "pace_hr" (Speed/HR) or "power_hr" (Power/HR).}

\item{start_date}{Optional. Analysis start date (YYYY-MM-DD string or Date). Defaults to ~1 year ago.}

\item{end_date}{Optional. Analysis end date (YYYY-MM-DD string or Date). Defaults to today.}

\item{min_duration_mins}{Minimum activity duration (minutes) to include. Default 20.}

\item{add_trend_line}{Add a smoothed trend line (\code{geom_smooth})? Default \code{TRUE}.}

\item{smoothing_method}{Smoothing method for trend line (e.g., "loess", "lm"). Default "loess".}

\item{ef_df}{\strong{Recommended.} A pre-calculated data frame from \code{calculate_ef()}.
When provided, analysis uses local data only (no API calls).}

\item{group_var}{Optional. Column name for grouping/faceting (e.g., "athlete_id").}

\item{group_colors}{Optional. Named vector of colors for groups.}
}
\value{
A ggplot object showing the EF trend.
}
\description{
Visualizes the trend of Efficiency Factor (EF) over time.
}
\details{
Plots the Efficiency Factor (EF) trend over time. \strong{Recommended workflow: Use local data via \code{ef_df}.}

Plots EF (output/HR based on activity averages). An upward trend
often indicates improved aerobic fitness. Points colored by activity type.
\strong{Best practice: Use \code{load_local_activities()} + \code{calculate_ef()} + this function.}
}
\examples{
# Example using pre-calculated sample data
data("athlytics_sample_ef", package = "Athlytics")
p <- plot_ef(athlytics_sample_ef)
print(p)

\dontrun{
# Example using local Strava export data
activities <- load_local_activities("strava_export_data/activities.csv")

# Plot Pace/HR EF trend for Runs (last 6 months)
plot_ef(data = activities,
        activity_type = "Run",
        ef_metric = "pace_hr",
        start_date = Sys.Date() - months(6))

# Plot Power/HR EF trend for Rides
plot_ef(data = activities,
        activity_type = "Ride",
        ef_metric = "power_hr")

# Plot Pace/HR EF trend for multiple Run types (no trend line)
plot_ef(data = activities,
        activity_type = c("Run", "VirtualRun"),
        ef_metric = "pace_hr",
        add_trend_line = FALSE)
}
}
