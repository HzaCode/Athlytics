% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/calculate_exposure.R
\name{calculate_exposure}
\alias{calculate_exposure}
\title{Calculate Training Load Exposure (ATL, CTL, ACWR)}
\usage{
calculate_exposure(
  activities_data,
  activity_type = c("Run", "Ride", "VirtualRide", "VirtualRun"),
  load_metric = "duration_mins",
  acute_period = 7,
  chronic_period = 42,
  user_ftp = NULL,
  user_max_hr = NULL,
  user_resting_hr = NULL,
  end_date = NULL
)
}
\arguments{
\item{activities_data}{A data frame of activities from \code{load_local_activities()}.
Must contain columns: date, distance, moving_time, elapsed_time,
average_heartrate, average_watts, type, elevation_gain.}

\item{activity_type}{Type(s) of activities to include (e.g., "Run", "Ride").
Default includes common run/ride types.}

\item{load_metric}{Method for calculating daily load (e.g., "duration_mins",
"distance_km", "tss", "hrss"). Default "duration_mins".}

\item{acute_period}{Days for the acute load window (e.g., 7).}

\item{chronic_period}{Days for the chronic load window (e.g., 42). Must be greater than \code{acute_period}.}

\item{user_ftp}{Required if \code{load_metric = "tss"}. Your Functional Threshold Power.}

\item{user_max_hr}{Required if \code{load_metric = "hrss"}. Your maximum heart rate.}

\item{user_resting_hr}{Required if \code{load_metric = "hrss"}. Your resting heart rate.}

\item{end_date}{Optional. Analysis end date (YYYY-MM-DD string or Date). Defaults to today.
The analysis period covers the \code{chronic_period} days ending on this date.}
}
\value{
A data frame with columns: \code{date}, \code{daily_load}, \code{atl} (Acute Load),
\code{ctl} (Chronic Load), and \code{acwr} (Acute:Chronic Ratio) for the analysis period.
}
\description{
Calculates training load metrics like ATL, CTL, and ACWR from local Strava data.
}
\details{
Calculates daily load, ATL, CTL, and ACWR from Strava activities based on the chosen metric and periods.

Provides data for \code{plot_exposure}. Requires extra prior data for
accurate initial CTL. Requires FTP/HR parameters for TSS/HRSS metrics.
}
\examples{
# Example using simulated data
data(sample_exposure)
print(head(sample_exposure))

\dontrun{
# Example using local Strava export data
activities <- load_local_activities("strava_export_data/activities.csv")

# Calculate training load for Rides using TSS
ride_exposure_tss <- calculate_exposure(
  activities_data = activities,
  activity_type = "Ride",
  load_metric = "tss",
  user_ftp = 280,
  acute_period = 7,
  chronic_period = 28
)
print(head(ride_exposure_tss))

# Calculate training load for Runs using HRSS
run_exposure_hrss <- calculate_exposure(
  activities_data = activities,
  activity_type = "Run",
  load_metric = "hrss",
  user_max_hr = 190,
  user_resting_hr = 50
)
print(tail(run_exposure_hrss))
}
}
